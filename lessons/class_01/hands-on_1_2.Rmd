---
title: "Transform Data 2: summarize"
output: html_notebook
---

<!-- This file by Charlotte Wickham (with some modifications by Martin Monkman) is licensed under a Creative Commons Attribution 4.0 International License, adapted from the orignal work at https://github.com/rstudio/master-the-tidyverse by RStudio. -->


```{r setup}
library(tidyverse)
library(gapminder)

```

> Please refer to [_R for Data Science_, Data transformation](https://r4ds.had.co.nz/transform.html) for more information about this section.

When working with data, particularly large data sets, you encounter a situation where you need to: 

* subset the data so that it contains only those records you are interested in (Why deal with a data table that has every province in Canada when you just need the British Columbia data?)

* subset the data so that it contains only those variables you are interested in (Why keep looking at variables that do not factor into your analysis, or you will not print in your report?)

* create new variables, often through calculations based on variables in your data



To achieve these three goals, we will be using functions from the tidyverse package {dplyr}. The functions are verbs that describe what they do. Here's a list of the {dplyr} functions that you'll be using:


|function |action |
| :--- | :--- |
| `filter()`    | *keep rows*|
| `select()`    | *keep variables (or drop them -var)*|
| `mutate()`    | *create a new variable*|
| `arrange()`    | *sort from smallest to largest*|
| `arrange(desc())`    | *sort from largest to smallest*|



### other operators

In addition to these functions, R has a number of operators that add significantly to your code.

**Arithmetic operators**

| Operator | Description |
| :--- | :--- |
| + | *plus* |
| - | *minus* |
| \* | *multiplication*  |
| / | *division* |
| ^ | *exponential* |

<P>

**Boolean operators** are a special type of operator that return TRUE or FALSE.  

| Operator | Description |
| :--- | :--- |
| ==    | *equal, tests equality* |
| !=    | *not equal, tests inequality* |
| \>    | *greater than, tests greater than* (also >=) |
| <     | *less than, tests less than* (also <=) |
| %in%  | *contains, tests inclusion* |

<P>

Boolean operators can be combined with *and* or *or*.  

| Operator | Description |
| :--- | :--- |
| `&`     | *and, returns true if preceeding and following are both true, else false* |
| &#124;  | *or, returns true if either preceeding and following are true, else false* |


* see [_R for Data Science_, "Comparisions""](https://r4ds.had.co.nz/transform.html#comparisons) and ["Logical Operators"](https://r4ds.had.co.nz/transform.html#logical-operators).]




## gapminder

```{r}
gapminder
```


## Your Turn 2.1

Use summarise() to compute two statistics about the data:

* The first (minimum) year in the dataset
* The last (maximum) year in the dataset
* The number of unique countries

```{r}


```

## Your Turn 2.2

Extract the rows for African countries in 2007.

Then find:

1. The number of unique countries
2. The median life expectancy of African countries as a group

```{r}


```


## Your Turn 2.3

Find the median life expectancy by continent in 2007.

```{r}

```


## Your Turn 2.4

Find the median life expectancy by continent for each year in the dataframe.

```{r}

gapminder %>%
  group_by(continent, year) %>%
  summarize(median_lifeExp = median(lifeExp))

```
## Your Turn 2.5

Brainstorm with your neighbor the sequence of operations to find:  the country with biggest jump in life expectancy  (between any two consecutive records) for each continent.

## Your Turn 2.6

Find the country with biggest jump in life expectancy (between any two consecutive records) for each continent.

```{r}


```


***

# Take aways

* Make tables of summaries with `summarise()`  
* Do groupwise operations with `group_by()`
