---
title: 'BIDA302 - assignment #1'
subtitle: 'solutions'
output: html_document
---


Package load:
```{r setup}
library(tidyverse)
# data files
library(nycflights13)

```

## YOUR NAME HERE



## Introduction

> For this homework assignment, please write your answer for each question after the question text but before the line break before the next one.

> In some cases, you will have to insert R code chunks, and run them to ensure that you've got the right result.

> Use all of the R Markdown formatting you want! Bullets, bold text, etc. is welcome.

> Once you have submitted your assignment, I will be hitting the "Knit" button—please ensure that the output renders correctly.



## Questions


### 1. Assign a variable
> (1 mark)

> Why does this code chunk not work?

```{r eval=FALSE}
stringlenght <- 10

stringlength
```

> Look carefully! (This may seem like an exercise in pointlessness, but training your brain to notice even the tiniest difference will pay off when programming.)

**Answer:**

The variable is spelled differently in each case.


### 2. Reducing the size of your data set
> (1 mark)

> Starting with the {mpg} data frame, use `filter()` and `select()` to create a shorter form of this table that contains the following records and variables:
>
>* compact and subcompact Volkswagens from the model year 1999
>
>* manufacturer, model, mileage in both city and highway 

```{r}
# one possible solution
mpg %>%
  filter(manufacturer == "volkswagen",
         class %in% c("compact", "subcompact"),
         year == 1999) %>%
  select(manufacturer, model, cty, hwy)

# variant: use of "&" instead of commas in filter
mpg %>%
  filter(manufacturer == "volkswagen" &
         class %in% c("compact", "subcompact") &
         year == 1999) %>%
  select(manufacturer, model, cty, hwy)


# another solution: 
#  - separate filters for each variable
#  - use of "OR" | instead of "%in%"
mpg %>%
  filter(manufacturer == "volkswagen")  %>% 
  filter(class == "compact" | class == "subcompact")  %>% 
  filter(year == 1999) %>%
  select(manufacturer, model, cty, hwy)


```

***

### 3. Selecting variables
> (1 mark)

> What happens if you include the name of a variable twice in a `select()` call? Demonstrate using the {gapminder} data.


The variable is _not_ duplicated.

```{r}
library(gapminder)

gapminder %>%
  select(country, year, lifeExp, year)
  

```



***

### 4. Religion and income data (USA)
> (2 marks)

> The table `relig_income` is in {tidyr}.
>
>a. Load this table, and take a look at it. What tidy principle(s) does this table violate? (See the ["Tidy Data" chapter](https://r4ds.had.co.nz/tidy-data.html) in _R4DS_., and ["Tidy Data for Efficiency, Reproducibility, and Collaboration"](https://www.openscapes.org/blog/2020/10/12/tidy-data/))
>

Coming in week 2!

***


### 5. R Markdown
> (1 mark)

> The following chunk of code produces a chart. When this notebook is previewed, the R code inside the chunk is also rendered.
>
> Enter a chunk option so that the chart shows in the output, but the code does not.
>
> (Hint: use the RMarkdown cheatsheet to find the solution!)

```{r}
# hide this code!
ggplot(data = mpg) +
  geom_point(mapping = aes(x = displ, y = hwy))

```

The solution is to put the option "echo = FALSE" after the "r" in the opening bit of the code.


```{r, echo=FALSE}
ggplot(data = mpg) +
  geom_point(mapping = aes(x = displ, y = hwy))

```





***

### 6. Flight data
> (4 marks)

> For Q3a-3d, use the data `nycflights13::flights`
>
> Pay close attention to how the variables are coded.
>
> Using the data in the `nycflights13::flights` table, find all flights that:
>
>a. Had an arrival delay of two or more hours

Note that variable `arr_delay` is measured in minutes, so we need to find the flights where that's greater than or equal to 120 minutes.

```{r}
filter(flights, arr_delay >= 120)
```


>b. Flew to Houston (there are two airports, with the codes IAH or HOU)

```{r}

filter(flights, dest == "IAH" | dest == "HOU")

```


Note that you could also use `%in%`

```{r}

filter(flights, dest %in% c("IAH", "HOU"))

# create named variable "houston"
houston <- c("IAH", "HOU")
filter(flights, dest %in% houston)


```


>c. Were operated by United, American, or Delta (you may want to review the separate airlines table to check the codes for each airline)

This one takes a bit of effort--you have to find the codes that match the values in the variable `carrier` with the airline names.

The {nycflights13} package has a number of tables, including `airlines`

```{r}
nycflights13::airlines
```

From this, we can find:

* United == UA

* American == AA

* Delta == DL

```{r}
# the `%in%` approach -- other methods are possible!
filter(flights, carrier %in% c("AA", "DL", "UA"))

```


>d. Departed in summer (July, August, and September)

The variable `month` is numeric, so we have to use greater than and less than to define the range.

```{r}

filter(flights, month >= 7, month <= 9)

```


Using the `:` operator would allow us to make a range. 

```{r}

filter(flights, month %in% 7:9)

```

You could also use "or" `|`, or `between()`


```{r}

filter(flights, month == 7 |
         month == 8 |
         month == 9)

filter(flights, between(month, 7, 9))

```



### Watch your quotation marks! 

In many cases double and single quotes are interchangable, but fancy "smart" quotes to start and end are not valid

```{r, eval=FALSE}

nycflights13::flights %>% filter(carrier == “AA” | carrier == “DL” | carrier == “UA”)

nycflights13::flights %>% filter(carrier == "AA" | carrier == "DL" | carrier == "UA")

nycflights13::flights %>% filter(carrier == 'AA' | carrier == 'DL' | carrier == 'UA')

```

